/*

FIR filter designed with
http://t-filter.appspot.com

sampling frequency: 12000 Hz

* 0 Hz - 600 Hz
  gain = 1
  desired ripple = 0.1 dB
  actual ripple = 0.0711206230924052 dB

* 1200 Hz - 6000 Hz
  gain = 0
  desired attenuation = -40 dB
  actual attenuation = -40.31324821031911 dB

*/

#ifndef DIZIMACAO_H_INCLUDED
#define DIZIMACAO_H_INCLUDED

#include "defines.h"
#include "arm_math.h"

static float32_t pCoeffs[FILTER_TAP_NUM] = {
  -0.006035202093124089,
  -0.0021214779471192763,
  -0.0009185793079305108,
  0.0014354409383040695,
  0.004535325774584334,
  0.0075845667263980355,
  0.009520010410639433,
  0.009283559976078708,
  0.006147237627867569,
  0.00003562243666405604,
  -0.00826040562814116,
  -0.01705478790749873,
  -0.023972035109763246,
  -0.02637021659400638,
  -0.021912527321237326,
  -0.009166387897164957,
  0.011925275582553121,
  0.03982187247588656,
  0.07148949807746896,
  0.10282609826912409,
  0.12938049566799986,
  0.14716065816253898,
  0.15342592464984162,
  0.14716065816253898,
  0.12938049566799986,
  0.10282609826912409,
  0.07148949807746896,
  0.03982187247588656,
  0.011925275582553121,
  -0.009166387897164957,
  -0.021912527321237326,
  -0.02637021659400638,
  -0.023972035109763246,
  -0.01705478790749873,
  -0.00826040562814116,
  0.00003562243666405604,
  0.006147237627867569,
  0.009283559976078708,
  0.009520010410639433,
  0.0075845667263980355,
  0.004535325774584334,
  0.0014354409383040695,
  -0.0009185793079305108,
  -0.0021214779471192763,
  -0.006035202093124089
};

float32_t pState[FILTER_TAP_NUM+BUFFER_SIZE-1];

arm_fir_decimate_instance_f32 S = {DIZIMACAO, FILTER_TAP_NUM, pCoeffs, pState};

void initializeFIR(arm_fir_decimate_instance_f32* S)
{
	uint32_t i = 0;
	for (i = 0; i<(FILTER_TAP_NUM+BUFFER_SIZE-1); i++) {pState[i] = 0;}

}

#endif
